# 新建标签方案

本章节为您介绍如何创建衍生标签方案，支持通过编写TQL，将计算结果作为标签值，为实体生成新的标签。

实体或关系上已绑定云计算资源上的表生成标签。

在制作衍生标签时需要明确标签的生成逻辑是什么，根据已有标签做什么样的运算，生成的结果字段哪个对应为新的标签，要关联的标签对象是哪个，标签任务的调度类型支持立即运行的调度或者周期调度。

## 操作步骤

1.  登录[数据资源平台控制台](https://dataq.console.aliyun.com)。

2.  在菜单栏左上角，单击**![菜单](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6504337061/p188771.png)**图标，选择**研发工作台**。

3.  单击**资产加工** \> **![语义建模](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1290330161/p208848.png)** \> **标签工厂** \> **标签方案**。

4.  单击**新建标签方案**，填写方案名称、选择方案类型**TQL模式**，填写方案描述，单击**完成**。

    1.  在**标签配置**页面，选择源和目标云计算资源，在查询编辑器里面输入TQL语句，单击**TQL测试**。

        **说明：** select 后面需带绑定对象的主标签才可开启输出表关联标签。

        测试通过，可查看**数据结果**table格式。

        -   单击**返回JSON**，查看数据结果JSON格式。

            ![查看数据结果](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1867900161/p204885.png)

        -   单击**执行的SQL**，查看执行的SQL语句。
        -   单击**步骤详情**，查看执行的每一步耗时。
        对返回结果设置输出表关联标签：在页面右侧**标签配置下**，单击**![开启](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1867900161/p204888.png)**开启**输出表关联标签**，选择绑定对象，选择绑定实体主标签。

        ![标签配置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1867900161/p204889.png)

        对返回标签新建标签：单击**绑定标签名**下的**新建标签**，填写标签名称、标签code、描述和业务口径等，单击**完成**。

        ![新建标签](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1867900161/p204891.png)

        在**绑定标签名**下可查看新建标签。单击页面右上角**![下一步](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6323117951/p120840.png)**图标。

    2.  进入**离线任务配置**，选择调度类型为：一次性调度，单击页面右上角**![下一步](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6323117951/p120840.png)**图标。

    3.  进入**预览保存**页面，可以查看标签方案配置信息，单击**![保存](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6323117951/p120841.png)**图标。

        ![预览方案](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1867900161/p204898.png)

5.  页面跳转至**标签方案**列表，可查看新建的标签方案。

    ![查看方案](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1867900161/p204900.png)

6.  选择新建的标签方案，单击**提交**，等待标签方案**状态**变为**已提交**。

7.  选择新建的标签方案，单击**执行**，在**运行参数配置**页面，选择**立即运行**，单击**确定**。

8.  选择新建的标签方案，单击**任务**，页面跳转到**任务列表**，等待任务**状态**变为**成功**。

    ![任务查看](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1867900161/p204906.png)

9.  单击左侧导航栏**标签模型** \> **![进入](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6504337061/p188815.png)**，进入对象视图页面，单击衍生标签绑定的对象后面的**详情**，查看新建的衍生标签。


