添加节点 
=========================

通过云计算资源节点添加算法为处理数据的核心步骤，通过节点的算法实现数据的标准化和规则化。例如通过手机号码校验函数将带+86的手机号码，清洗为正常的11位手机号。本节以添加MaxCompute_SQL节点为例进行介绍。

前提条件
----

* 已添加与云计算资源（这里为MaxCompute_SQL为例 ）节点相关的数据模型。

  

* 推荐您预先准备好算法文件、脚本等。

  




背景信息
----

* MaxCompute 节点是离线节点，运行于 MaxCompute 类型的云计算资源之上，可处理 MaxCompute 类型的数据源。

  

* 支持多种云计算资源，如：MaxCompute_SQL、MaxCompute_MR、Hive、Zerg-Standalone、Zerg-Standalone_Image、Zerg Service、Zerg Servic_Image、PostgreSQL、AnalyticDB_PostgreSQL。

  




操作步骤 
-------------------------

1. 登录[数据资源平台控制台](https://dataq.console.aliyun.com)。

   

2. 在页面左上角，单击![菜单](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6504337061/p188771.png)图标，选择 **研发工作台** 。

   

3. 在顶部菜单栏，选择 **资产加工** 。

   **说明**

   首次进入 **研发工作台** 时，系统默认进入 **资产加工** 页面，若您已在 **资产加工** 页面，请跳过该步骤。
   

4. 在左侧导航栏，选择 **![数据开发](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2524223261/p282097.png)数据开发** \> **公共节点** 。

   

5. 选择已创建的目录或者默认的目录，单击![配置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2524223261/p282232.png) **\>** **新建公共节点** 。

   

6. 在 **添加节点** 对话框，选择需要的节点类型，单击 **确定** 。

   **说明**

   支持多种云计算资源节点类型：MaxCompute_SQL、MaxCompute_MR、Hive、Zerg-Standalone、Zerg-Standalone_Image、Zerg Service、Zerg Servic_Image、PostgreSQL、AnalyticDB_PostgreSQL。
   

7. 在节点编辑页面进行配置。

   1. 单击页面右侧 **节点属性** 页签，自定义节点标识、节点名称以及公共节点的版本以及简介信息等。

      通用节点属性配置 
      -----------------------------

      

      |    配置项     |                                                                                                                                                      说明                                                                                                                                                      |
      |------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
      | **节点标识**   | 节点的唯一标识，由用户自定义，同一个工作组必须是唯一的，不可重复。                                                                                                                                                                                                                                                                            |
      | **节点名称**   | 节点的名称。                                                                                                                                                                                                                                                                                                       |
      | **计算资源类型** | 不可编辑，和添加节点的时候选择的资源类型一致的，这里以 **MaxCompute** 为例。                                                                                                                                                                                                                                                               |
      | **作业类型**   | 根据各个云计算资源类型对应显示，不可编辑。 **说明** * 当云计算资源类型选择MaxCompute，则作业类型显示SQL或者 MR/GRAPH ，当显示为SQL时，则在SQL编译器里创建节点。   * 当云计算资源类型选择Zerg相关类型时，则作业类型显示为代码包。   * 当云计算资源类型选择Hive时，则自动隐藏该参数。    |
      | **算法文件**   | 仅当数据资源类型选择为MaxCompute_MR时，该参数才显示。通过上传算法包实现代码的快速编辑。 当脚本类型为 MR/GRAPH 时，您可以选择以上传的方式，添加脚本内容。上传算法文件时需要配置以下两个参数：  * 算法文件：本地编写完成的算法文件。   * 保留源文件名：上传算法文件后，是否保留算法文件的源文件名。如果设置为否，则按规则随机生成算法文件名。    |
      | **节点简介**   | 节点的描述性信息，方便用户理解和查找。                                                                                                                                                                                                                                                                                          |

      

      

      Zerg-Standalone/Zerg Servic节点资源独有的参数配置说明 
      -------------------------------------------------------------

      

      |  作业类型   |    配置项     |                                                                                                                            说明                                                                                                                             |
      |---------|------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
      | **代码包** | **GPU**    | 选中 **使用 GPU** 时，可使用 GPU 对该 Zerg Standalone 节点做计算。  后续在场景中添加该 Zerg Standalone 节点时，您可在 **运行属性** 中设置 **单实例 GPU 卡数** 。                                                                                                                        |
      | **代码包** | **节点产出模型** | 选中 **产出模型** ：把模型管理的服务地址透传到算法启动参数，节点内部实现时即可调用对应的 Java 或 Python 版本的模型管理 SDK 将场景的操作模型，供其他算法操作使用。                                                                                                                                                             |
      | **代码包** | **开发语言**   | 当前支持的开发文及版本如下：  * **Java** ： **Java 7** 和 **Java 8** 。   * **Python** ： **Python 2.7** 和 **Python 3.6** 。    您需要根据运行算法的实际环境来选择 **开发语言** 和 **开发语言版本** 。 |
      | **代码包** | **开发语言版本** | 当前支持的开发文及版本如下：  * **Java** ： **Java 7** 和 **Java 8** 。   * **Python** ： **Python 2.7** 和 **Python 3.6** 。    您需要根据运行算法的实际环境来选择 **开发语言** 和 **开发语言版本** 。 |
      | **代码包** | **脚本内容**   | SHELL 启动脚本，用于启动算法文件。                                                                                                                                                                                                                                      |
      | **代码包** | **算法文件**   | 支持导入本地资源文件，必须是单个的 ZIP 包。                                                                                                                                                                                                                                  |

      
   
   2. 输入SQL语句，单击页面右侧 **运行属性** 页签，选择需要的测试计算资源。

      
   
   3. 单击页面右侧 **参数变量** 页签，设置节点的输入/输出参数和运行参数等，当选择的计算资源类型为"Maxcompute_SQL时，则可以通过解析获取参数值。

      1. 节点输入：单击 **添加节点输入** ，添加节点输入变量和云计算资源类型，这里以计算资源类型选择为"Maxcompute"为例，通过代码解析获取。

         
      
      2. 节点输出：单击 **添加节点输出** ，选择节点输出变量和云计算资源类型这里以计算资源类型选择为"Maxcompute"为例，通过代码解析获取。

         
      
      3. 运行参数：单击 **新建参数** ，选择节点输出变量和云计算资源类型，这里以计算资源类型选择为"Maxcompute"为例，通过代码解析获取。

         

         |  配置项   |                                                                                                       说明                                                                                                       |   |
         |--------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---|
         | 添加输入信息 | 输入/输出信息需要通过手动添加或解析代码生成，解析通过单击编辑页面的![解析](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3576223261/p282422.png)实现。 **说明** 只有当数据资源类型为Maxcompute_SQL时，才可以解析，其他数据类型不能使用解析。 |   |
         | 添加输出信息 | 输入/输出信息需要通过手动添加或解析代码生成，解析通过单击编辑页面的![解析](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3576223261/p282422.png)实现。 **说明** 只有当数据资源类型为Maxcompute_SQL时，才可以解析，其他数据类型不能使用解析。 |   |
         | 运行参数   | 输入/输出信息需要通过手动添加或解析代码生成，解析通过单击编辑页面的![解析](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3576223261/p282422.png)实现。 **说明** 只有当数据资源类型为Maxcompute_SQL时，才可以解析，其他数据类型不能使用解析。 |   |
         | 运行参数   | 输入/输出信息需要通过手动添加或解析代码生成，解析通过单击编辑页面的![解析](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3576223261/p282422.png)实现。 **说明** 只有当数据资源类型为Maxcompute_SQL时，才可以解析，其他数据类型不能使用解析。 |   |
         | 运行参数   | 输入/输出信息需要通过手动添加或解析代码生成，解析通过单击编辑页面的![解析](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3576223261/p282422.png)实现。 **说明** 只有当数据资源类型为Maxcompute_SQL时，才可以解析，其他数据类型不能使用解析。 |   |

         

         
      

      
   
   4. 在节点编辑页面，单击左上角![保存](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8561429061/p205637.png)按钮。

      
   
   5. 在 **确认节点信息** 对话框，确认节点名称、节点标识和保存的目录设置正确，单击 **确定** 。

      
   
   6. 单击![运行](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9561429061/p205638.png)按钮，出现运行参数页面，输入默认值，单击 **确定** ，查看运行日志。

      
   

   



